import{r as s}from"./react-38b596a0.js";import{w as U}from"./use-sync-external-store-9f6f29ae.js";import{r as D}from"./react-dom-e6a66cff.js";function L(e){e()}var w=L,M=e=>w=e,H=()=>w,C=Symbol.for("react-redux-context"),g=typeof globalThis<"u"?globalThis:{};function P(){if(!s.createContext)return{};const e=g[C]??(g[C]=new Map);let n=e.get(s.createContext);return n||(n=s.createContext(null),e.set(s.createContext,n)),n}var a=P(),V=()=>{throw new Error("uSES not initialized!")};function v(e=a){return function(){return s.useContext(e)}}var E=v(),k=V,z=e=>{k=e},B=(e,n)=>e===n;function T(e=a){const n=e===a?E:v(e);return function(t,o={}){const{equalityFn:r=B,devModeChecks:c={}}=typeof o=="function"?{equalityFn:o}:o,{store:l,subscription:f,getServerState:i,stabilityCheck:b,identityFunctionCheck:p}=n();s.useRef(!0);const x=s.useCallback({[t.name](d){return t(d)}}[t.name],[t,b,c.stabilityCheck]),S=k(f.addNestedSub,l.getState,i||l.getState,x,r);return s.useDebugValue(S),S}}var Q=T();function W(){const e=H();let n=null,u=null;return{clear(){n=null,u=null},notify(){e(()=>{let t=n;for(;t;)t.callback(),t=t.next})},get(){let t=[],o=n;for(;o;)t.push(o),o=o.next;return t},subscribe(t){let o=!0,r=u={callback:t,next:null,prev:u};return r.prev?r.prev.next=r:n=r,function(){!o||n===null||(o=!1,r.next?r.next.prev=r.prev:u=r.prev,r.prev?r.prev.next=r.next:n=r.next)}}}}var m={notify(){},get:()=>[]};function I(e,n){let u,t=m,o=0,r=!1;function c(h){b();const N=t.subscribe(h);let y=!1;return()=>{y||(y=!0,N(),p())}}function l(){t.notify()}function f(){d.onStateChange&&d.onStateChange()}function i(){return r}function b(){o++,u||(u=n?n.addNestedSub(f):e.subscribe(f),t=W())}function p(){o--,u&&o===0&&(u(),u=void 0,t.clear(),t=m)}function x(){r||(r=!0,b())}function S(){r&&(r=!1,p())}const d={addNestedSub:c,notifyNestedSubs:l,handleChangeWrapper:f,isSubscribed:i,trySubscribe:x,tryUnsubscribe:S,getListeners:()=>t};return d}var _=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",q=_?s.useLayoutEffect:s.useEffect;function A({store:e,context:n,children:u,serverState:t,stabilityCheck:o="once",identityFunctionCheck:r="once"}){const c=s.useMemo(()=>{const i=I(e);return{store:e,subscription:i,getServerState:t?()=>t:void 0,stabilityCheck:o,identityFunctionCheck:r}},[e,t,o,r]),l=s.useMemo(()=>e.getState(),[e]);q(()=>{const{subscription:i}=c;return i.onStateChange=i.notifyNestedSubs,i.trySubscribe(),l!==e.getState()&&i.notifyNestedSubs(),()=>{i.tryUnsubscribe(),i.onStateChange=void 0}},[c,l]);const f=n||a;return s.createElement(f.Provider,{value:c},u)}var X=A;function R(e=a){const n=e===a?E:v(e);return function(){const{store:t}=n();return t}}var K=R();function j(e=a){const n=e===a?K:R(e);return function(){return n().dispatch}}var Y=j();z(U.useSyncExternalStoreWithSelector);M(D.unstable_batchedUpdates);export{X as P,Y as a,Q as u};
